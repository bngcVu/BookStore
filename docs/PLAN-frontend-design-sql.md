# PLAN-frontend-design-sql.md

> Generated by @/ui-ux-pro-max & @/plan
> Context: Thiết kế Frontend dựa trên SQL Schema (BookStore)

## 1. Design System (Hệ thống thiết kế)

Sử dụng phong cách "Modern Ecommerce" tập trung vào trải nghiệm đọc và mua sắm.

### Typography (Kiểu chữ)
- **Primary Font (Body/UI)**: `Inter` hoặc `Be Vietnam Pro` (Hỗ trợ tiếng Việt tốt, hiện đại, dễ đọc).
- **Secondary Font (Headings/Book Titles)**: `Playfair Display` hoặc `Merriweather` (Tạo cảm giác "sách", tri thức, sang trọng).

### Color Palette (Bảng màu)
- **Primary**: `Indigo-600` (#4F46E5) hoặc `Emerald-600` (Tùy chọn brand, nhưng Indigo tạo cảm giác tin cậy/công nghệ).
- **Secondary**: `Amber-500` (#F59E0B) (Dùng cho CTA, Rating, Flash Sale - tạo tương phản).
- **Background**: `Slate-50` (Nền sáng dịu), `White` (Card).
- **Text**: `Slate-900` (Chính), `Slate-600` (Phụ).
- **Status**:
  - Success: `Green-600` (Completed, In Stock).
  - Error: `Red-600` (Out of stock, Error).
  - Warning: `Orange-500` (Pending, Low stock).

### Components (Thành phần giao diện)
- **Cards**: Bo góc `rounded-lg`, shadow nhẹ `shadow-sm`, hover `shadow-md`.
- **Buttons**: Pill-shape hoặc Rounded, hiệu ứng ripple.
- **Inputs**: Outline style, focus ring rõ ràng.

---

## 2. Sitemap & Feature Mapping (Bản đồ tính năng dựa trên DB)

Dưới đây là mapping chi tiết giữa các bảng SQL và các trang/component Frontend cần thiết kế.

### A. Public Pages (Trang công khai)

| Page / Component | SQL Tables Involved | Features & UI Elements |
|------------------|---------------------|------------------------|
| **Homepage** | `books`, `categories`, `flash_sales`, `flash_sale_items`, `promotions` | - Banner Slider (Promotions)<br>- **Flash Sale Section**: Đồng hồ đếm ngược, thanh tiến trình "Đã bán" (`sold_count`/`quantity_limit`).<br>- **Bestsellers**: List sách `sold_count` cao nhất.<br>- **Featured Categories**: Grid danh mục kèm ảnh. |
| **Product Listing** (Catalog) | `books`, `authors`, `publishers`, `categories`, `reviews` | - Filters: Giá, Danh mục, Tác giả, NXB, Rating (dùng `avg_rating`).<br>- Sorting: Bán chạy, Mới nhất, Giá tăng/giảm.<br>- Badges: "Mới", "-20%", "Hết hàng". |
| **Product Detail** (Single) | `books`, `book_variants`, `book_images`, `reviews`, `review_images`, `authors`, `inventory`, `promotions` | - **Gallery**: Slider ảnh (`book_images` + video nếu có).<br>- **Variant Selector**: Chọn bìa (Cứng/Mềm), Edition -> Thay đổi giá/SKU (`book_variants`).<br>- **Stock Status**: "Còn hàng" hoặc "Chỉ còn X" (`inventory`).<br>- **Reviews**: List đánh giá, lọc theo sao, xem ảnh (`review_images`).<br>- **Related**: Sách cùng tác giả/cate.<br>- **Action**: "Thêm vào giỏ", "Mua ngay", "Yêu thích". |
| **Cart** | `carts`, `book_variants`, `promotions` | - List item, tăng giảm số lượng.<br>- Kiểm tra tồn kho realtime.<br>- Hiển thị khuyến mãi áp dụng. |
| **Checkout** | `user_addresses`, `shipping_carriers`, `shipping_rates`, `vouchers`, `payments` | - **Address**: Chọn/Thêm địa chỉ (`provinces`, `districts`...).<br>- **Shipping**: Chọn đơn vị vận chuyển, tính phí ship (`shipping_rates`).<br>- **Voucher**: Nhập mã, check `vouchers` (min spend, date).<br>- **Payment**: Chọn phương thức (`payments`), tích hợp cổng thanh toán. |

### B. User Dashboard (Trang cá nhân)

| Page / Component | SQL Tables Involved | Features & UI Elements |
|------------------|---------------------|------------------------|
| **Profile & Tiers** | `users`, `customer_tiers`, `reward_points` | - Info: Avatar, Tên, Ngày sinh.<br>- **Membership**: Thanh tiến trình lên hạng (`total_spent`/`min_spent`), Quyền lợi hiện tại.<br>- **Points**: Số dư điểm (`reward_points`), Lịch sử (`loyalty_transactions`). |
| **Order History** | `orders`, `order_items`, `order_status_history` | - List đơn hàng: Status badge (Màu sắc theo `status`).<br>- Tabs: Tất cả, Chờ xác nhận, Đang giao, Hoàn thành, Hủy.<br>- Actions: "Hủy đơn" (nếu pending), "Mua lại". |
| **Order Detail** | `orders`, `order_items`, `shipping_carriers`, `refunds` | - Timeline trạng thái (`order_status_history`).<br>- Tracking Number link.<br>- **Refund/Return**: Form yêu cầu hoàn tiền (`refunds`) với lý do + upload ảnh. |
| **Address Book** | `user_addresses`, `provinces`, `districts` | - CRUD địa chỉ. Set default. Dropdown chọn Tỉnh/Huyện/Xã. |
| **Wishlist** | `wishlists` | - Grid sách yêu thích. Nút "Bỏ thích", "Thêm vào giỏ". |
| **Notifications** | `notifications` | - List thông báo. Đánh dấu đã đọc. Filter theo loại (Order, Promo...). |

### C. Authentication (Xác thực)

| Page | SQL Tables Involved | Features |
|------|---------------------|----------|
| **Register/Login** | `users`, `otp_codes` | - Form đăng ký/đăng nhập.<br>- **OTP Verification**: Input mã xác thực khi đăng ký/quên pass. |
| **Forgot Password** | `otp_codes` | - Flow gửi email/SMS -> Nhập OTP -> Đổi pass. |

---

## 3. Implementation Phases (Lộ trình triển khai)

### Phase 1: Core Foundation & Catalog (Nền tảng & Sản phẩm)
- [ ] Setup Project (Next.js/React + Tailwind).
- [ ] Implement Design System (Tokens, Base Components).
- [ ] **Home Page**: Layout, Header, Footer.
- [ ] **Product Listing**: Grid, Filter UI (Mock data first).
- [ ] **Product Detail**: Info, Gallery, Variant Logic (Frontend logic switching SKU).

### Phase 2: Authentication & Checkout Flow (Mua hàng)
- [ ] **Auth Pages**: Login, Register UI.
- [ ] **Cart**: UI, LocalStorage logic (hoặc API).
- [ ] **Checkout**:
    - Address Form (Load Province/District data).
    - Shipping Method UI (Mock calculation based on logic).
    - Payment Method Selection.
    - Voucher Input UI.

### Phase 3: User Dashboard & Loyalty (Người dùng & CSKH)
- [ ] **Profile**: Edit info.
- [ ] **Order Management**: List, Detail, Status UI.
- [ ] **Membership Section**: Tier progress bar, Points display.
- [ ] **Reviews**: Form đánh giá (Star rating, Text, Image upload UI).

### Phase 4: Engagement & Optimization (Tương tác & Tối ưu)
- [ ] **Flash Sales**: Countdown timer component, Progress bar.
- [ ] **Notifications**: Real-time toast/dropdown UI.
- [ ] **Recommendation**: "Bạn có thể thích" section UI.
- [ ] **Refunds**: UI form yêu cầu trả hàng.
- [ ] SEO Optimization & Performance (Lighthouse).

---

## 4. Technical Notes

- **Responsive**: Mobile-first. Bắt buộc tối ưu cho Mobile Web.
- **Performance**: Sử dụng `Next.js Image` cho tối ưu ảnh bìa sách.
- **State Management**: Zustand hoặc React Context cho Cart/User State.
- **Localization**: Hỗ trợ i18n (sẵn sàng cho Tiếng Việt mặc định).

## Kiểm tra bao phủ Database (Database Coverage Check)
- [x] `customer_tiers`: Profile VIP Card.
- [x] `users`, `otp_codes`: Auth Flow.
- [x] `provinces`, `districts`, `user_addresses`: Address Form.
- [x] `categories`, `authors`, `publishers`, `books`, `book_variants`, `book_images`: Product Pages.
- [x] `inventory`: Stock labeling UI.
- [x] `carts`, `wishlists`: Cart & Wishlist Pages.
- [x] `flash_sales`, `vouchers`, `promotions`: Promo Sections.
- [x] `orders`, `order_items`, `shipping_rates`, `payments`: Checkout & History.
- [x] `refunds`: Refund Form.
- [x] `reviews`: Review Section.
- [x] `reward_points`: Point Widget.
- [x] `notifications`: Notif Center.
