<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết sản phẩm - BookStore</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;700;800&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/styles.css">
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <style type="text/tailwindcss">
        @theme {
            --font-display: 'Outfit', sans-serif;
            --font-body: 'Inter', sans-serif;
            --color-violet-500: #8b5cf6;
            --color-violet-600: #7c3aed;
        }
    </style>
</head>

<body class="min-h-screen pb-20">

    <div id="header-placeholder"></div>

    <div class="pt-[100px] max-w-7xl mx-auto px-4 sm:px-6">
        <!-- Breadcrumbs -->
        <div class="flex items-center gap-2 text-sm text-slate-500 mb-8 overflow-x-auto whitespace-nowrap">
            <a href="index.html" class="hover:text-violet-600">Trang chủ</a>
            <span>/</span>
            <a href="products.html" class="hover:text-violet-600">Sách</a>
            <span>/</span>
            <span class="text-slate-800 font-bold" id="bread-title">Loading...</span>
        </div>

        <div class="glass-card bg-white p-6 md:p-8 rounded-3xl mb-12">
            <div class="flex flex-col md:flex-row gap-8 lg:gap-12">
                <!-- Gallery -->
                <div class="w-full md:w-1/3 lg:w-[400px] flex-shrink-0">
                    <div
                        class="aspect-[3/4] bg-slate-50 rounded-2xl overflow-hidden border border-slate-100 mb-4 flex items-center justify-center relative">
                        <img id="main-image" src=""
                            class="h-full object-contain drop-shadow-xl transition-all duration-300">
                        <div class="absolute top-4 left-4" id="badge-container"></div>
                    </div>
                </div>

                <!-- Info -->
                <div class="flex-1">
                    <div class="mb-6">
                        <div class="flex flex-wrap items-center gap-4 mb-2">
                            <span
                                class="text-violet-600 bg-violet-50 px-3 py-1 rounded text-xs font-bold uppercase tracking-wide"
                                id="p-category">Category</span>
                            <div class="flex text-amber-400 text-sm" id="p-stars">★★★★★</div>
                            <span class="text-slate-400 text-sm" id="p-reviews">(0 đánh giá)</span>
                        </div>
                        <h1 class="text-3xl md:text-4xl font-display font-extrabold text-slate-900 leading-tight mb-2"
                            id="p-title">Loading...</h1>
                        <p class="text-slate-500 font-medium">Tác giả: <span class="text-slate-800"
                                id="p-author">...</span></p>
                    </div>

                    <div class="flex items-end gap-4 mb-8 pb-8 border-b border-slate-100">
                        <span class="text-4xl font-bold text-violet-600" id="p-price">0đ</span>
                        <span class="text-lg text-slate-400 line-through mb-1" id="p-original-price"></span>
                        <span class="text-rose-500 font-bold bg-rose-50 px-2 py-1 rounded text-sm mb-2"
                            id="p-discount"></span>
                    </div>

                    <!-- Variants -->
                    <div class="mb-8 hidden" id="variant-section">
                        <h3 class="font-bold text-slate-800 mb-3">Phiên bản</h3>
                        <div class="flex flex-wrap gap-3" id="variant-container">
                            <!-- JS Inject -->
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="flex flex-col sm:flex-row gap-4 mb-8">
                        <div class="flex items-center border border-slate-200 rounded-xl bg-slate-50 w-max">
                            <button
                                class="w-12 h-12 flex items-center justify-center text-slate-500 hover:text-violet-600 text-xl font-bold transition-colors">-</button>
                            <input type="number" value="1"
                                class="w-12 text-center bg-transparent border-none outline-none font-bold text-slate-800"
                                min="1" max="10">
                            <button
                                class="w-12 h-12 flex items-center justify-center text-slate-500 hover:text-violet-600 text-xl font-bold transition-colors">+</button>
                        </div>
                        <button
                            class="flex-1 bg-slate-900 text-white font-bold py-3 px-8 rounded-xl shadow-lg shadow-slate-900/20 hover:bg-slate-800 hover:scale-[1.02] active:scale-95 transition-all text-lg flex items-center justify-center gap-2">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                            </svg>
                            Thêm vào giỏ
                        </button>
                        <button
                            class="w-14 h-14 border border-slate-200 rounded-xl flex items-center justify-center text-slate-400 hover:text-rose-500 hover:border-rose-200 hover:bg-rose-50 transition-all">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                        </button>
                    </div>

                    <p class="text-sm text-slate-500 leading-relaxed mb-6" id="p-desc">...</p>

                    <!-- Feature Icons -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="flex items-center gap-3 p-3 bg-violet-50 rounded-lg border border-violet-100">
                            <div class="bg-white p-2 rounded-full shadow-sm text-violet-600">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                            </div>
                            <div class="text-xs">
                                <span class="block font-bold text-slate-800">Giao nhanh</span>
                                <span class="text-slate-500">24h tại TP.HCM</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-3 p-3 bg-indigo-50 rounded-lg border border-indigo-100">
                            <div class="bg-white p-2 rounded-full shadow-sm text-indigo-600">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                </svg>
                            </div>
                            <div class="text-xs">
                                <span class="block font-bold text-slate-800">Bảo hành</span>
                                <span class="text-slate-500">Đổi trả lỗi NXB</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="glass-card bg-white p-6 md:p-8 rounded-3xl min-h-[400px]">
            <div class="flex gap-8 border-b border-slate-200 mb-8 overflow-x-auto">
                <button class="pb-4 border-b-2 border-violet-600 text-violet-600 font-bold whitespace-nowrap">Mô tả sản
                    phẩm</button>
                <button
                    class="pb-4 border-b-2 border-transparent text-slate-500 hover:text-slate-800 font-medium whitespace-nowrap transition-colors">Thông
                    tin chi tiết</button>
                <button
                    class="pb-4 border-b-2 border-transparent text-slate-500 hover:text-slate-800 font-medium whitespace-nowrap transition-colors">Đánh
                    giá (128)</button>
            </div>
            <div class="prose prose-slate max-w-none text-slate-600 leading-loose">
                <p id="p-long-desc">Loading content...</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore
                    et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
                    aliquip ex ea commodo consequat.</p>
            </div>
        </div>

    </div>

    <div id="footer-placeholder"></div>

    <script src="js/mock_data.js"></script>
    <script src="js/layout.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const id = parseInt(urlParams.get('id')) || 1;
            const book = window.MOCK_DATA.books.find(b => b.id === id) || window.MOCK_DATA.books[0];

            document.title = `${book.title} - BookStore`;
            document.getElementById('bread-title').textContent = book.title;

            // Image
            document.getElementById('main-image').src = book.image;
            if (book.is_flash_sale) {
                document.getElementById('badge-container').innerHTML = `<span class="bg-rose-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-lg">-${book.discount}%</span>`;
            }

            // Info
            document.getElementById('p-category').textContent = book.category;
            document.getElementById('p-title').textContent = book.title;
            document.getElementById('p-author').textContent = book.author;
            document.getElementById('p-reviews').textContent = `(${book.reviews_count} đánh giá)`;
            document.getElementById('p-stars').innerHTML = '★'.repeat(Math.round(book.rating)) + '☆'.repeat(5 - Math.round(book.rating));

            document.getElementById('p-price').textContent = window.formatPrice(book.price);
            if (book.original_price) {
                document.getElementById('p-original-price').textContent = window.formatPrice(book.original_price);
            }
            if (book.discount) {
                document.getElementById('p-discount').textContent = `Giảm ${window.formatPrice(book.original_price - book.price)}`;
            }

            document.getElementById('p-desc').textContent = book.description;
            document.getElementById('p-long-desc').textContent = book.description.repeat(3); // Mock long desc

            // Variants
            if (book.variants && book.variants.length > 0) {
                const varSection = document.getElementById('variant-section');
                const varContainer = document.getElementById('variant-container');
                varSection.classList.remove('hidden');

                varContainer.innerHTML = book.variants.map((v, index) => `
                    <label class="cursor-pointer group">
                        <input type="radio" name="variant" class="peer sr-only" ${index === 0 ? 'checked' : ''}>
                        <div class="px-4 py-2 rounded-lg border border-slate-200 bg-white text-sm font-medium text-slate-600 peer-checked:border-violet-500 peer-checked:bg-violet-50 peer-checked:text-violet-700 hover:border-violet-300 transition-all">
                            ${v.type}
                        </div>
                    </label>
                `).join('');

                // Mock price update on click
                varContainer.addEventListener('change', (e) => {
                    // Since simple mock, just visually select, maybe update price if I had map
                });
            }
        });
    </script>
</body>

</html>