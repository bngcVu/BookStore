/* ===========================
   P0: ACCESSIBILITY IMPROVEMENTS
   =========================== */

/** 
 * Focus Indicators
 * Visible keyboard focus for all interactive elements
 */

/* Global focus styles */
*:focus-visible {
    outline: 2px solid var(--color-primary-blue, #3B82F6);
    outline-offset: 2px;
    border-radius: 4px;
}

/* Remove default outline (but keep for :focus-visible) */
*:focus:not(:focus-visible) {
    outline: none;
}

/* Interactive elements - buttons */
.btn-primary:focus-visible,
.btn-outline:focus-visible,
.btn-danger:focus-visible {
    outline: 2px solid var(--color-primary-blue, #3B82F6);
    outline-offset: 3px;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
}

/* Icon action buttons */
.action-btn:focus-visible {
    outline: 2px solid var(--color-primary-blue, #3B82F6);
    outline-offset: 2px;
    background: rgba(59, 130, 246, 0.05);
}

/* Navigation links */
.admin-nav-link:focus-visible {
    outline: 2px solid var(--color-primary-blue, #3B82F6);
    outline-offset: -2px;
    background: rgba(59, 130, 246, 0.08);
}

/* Form inputs */
.form-input:focus-visible,
.form-select:focus-visible,
.form-textarea:focus-visible {
    outline: 2px solid var(--color-primary-blue, #3B82F6);
    outline-offset: 0;
    border-color: var(--color-primary-blue, #3B82F6);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Checkboxes and toggles */
input[type="checkbox"]:focus-visible,
input[type="radio"]:focus-visible {
    outline: 2px solid var(--color-primary-blue, #3B82F6);
    outline-offset: 2px;
}

.toggle-switch input:focus-visible+.toggle-slider {
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
}

/* Table rows (if clickable) */
tr[onclick]:focus-visible,
tr.clickable-row:focus-visible {
    outline: 2px solid var(--color-primary-blue, #3B82F6);
    outline-offset: -2px;
    background: rgba(59, 130, 246, 0.03);
}

/**
 * Keyboard Navigation Utilities
 */

/* Add tabindex for keyboard navigation on clickable table rows */
.clickable-row {
    cursor: pointer;
}

.clickable-row:hover {
    background: rgba(0, 0, 0, 0.02);
}

/* Skip to main content link (hidden visually, visible on focus) */
.skip-to-main {
    position: absolute;
    top: -100px;
    left: 0;
    background: var(--color-primary-blue, #3B82F6);
    color: white;
    padding: 8px 16px;
    text-decoration: none;
    z-index: 10000;
    border-radius: 0 0 4px 0;
}

.skip-to-main:focus {
    top: 0;
}

/**
 * Screen Reader Only Content
 */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/**
 * High Contrast Support
 */
@media (prefers-contrast: high) {
    *:focus-visible {
        outline-width: 3px;
        outline-offset: 3px;
    }

    .btn-primary,
    .btn-danger {
        border: 2px solid currentColor;
    }
}

/**
 * Reduced Motion Support
 */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    .toggle-slider,
    .progress-fill {
        transition: none !important;
    }
}

/**
 * Touch Target Size (minimum 44x44px)
 */
.action-btn {
    min-width: 44px;
    min-height: 44px;
    padding: 10px;
}

.admin-nav-link {
    min-height: 44px;
    padding: 12px 16px;
}

/* Mobile: Increase touch targets */
@media (max-width: 768px) {
    .action-btn {
        min-width: 48px;
        min-height: 48px;
    }
}

/**
 * Color Contrast Improvements
 * Ensure WCAG AA compliance (4.5:1 for normal text)
 */

/* Fix low-contrast text */
.stat-change {
    font-weight: 500;
    /* Increase readability */
}

.stat-change.positive {
    color: #047857;
    /* Darker green for better contrast */
}

.stat-change.negative {
    color: #B91C1C;
    /* Darker red for better contrast */
}

.voucher-name,
.condition-text,
.usage-text {
    color: #475569;
    /* Slate-600, better than gray-400 */
}

/**
 * Focus Management for Modals
 * Ensure modal has proper focus trap when active
 */

/* Ensure modal background is visible to screen readers */
.modal-overlay[aria-hidden="true"] {
    pointer-events: none;
}