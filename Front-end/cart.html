<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Giỏ Hàng - BookStore</title>
    <link href="./assets/css/style.css" rel="stylesheet" />
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body class="bg-background text-text-main antialiased flex flex-col min-h-screen" x-data="{ mobileMenuOpen: false }">

    <!-- Reuse Header -->
    <header class="bg-surface/90 backdrop-blur-md border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="container-custom h-20 flex items-center justify-between gap-4">
            <button class="md:hidden p-2 text-slate-600 hover:bg-slate-100 rounded-full"
                @click="mobileMenuOpen = !mobileMenuOpen">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
            <a href="index.html" class="flex-shrink-0 flex items-center gap-2 group">
                <i data-lucide="book-open"
                    class="w-8 h-8 text-secondary group-hover:scale-110 transition-transform"></i>
                <span class="font-serif font-bold text-2xl text-primary tracking-tight">BookStore</span>
            </a>
            <nav class="hidden md:flex items-center gap-8">
                <a href="index.html"
                    class="text-sm font-medium text-text-muted hover:text-secondary transition-colors">Trang chủ</a>
                <div class="relative group py-6">
                    <a href="products.html"
                        class="text-sm font-medium text-text-muted hover:text-secondary flex items-center gap-1 transition-colors">
                        Danh mục <i data-lucide="chevron-down" class="w-4 h-4"></i>
                    </a>
                </div>
                <a href="products.html"
                    class="text-sm font-medium text-text-muted hover:text-secondary transition-colors">Bán chạy</a>
                <a href="products.html"
                    class="text-sm font-medium text-text-muted hover:text-secondary transition-colors">Khuyến mãi</a>
            </nav>
            <div class="hidden lg:flex flex-1 max-w-md mx-8 relative">
                <input type="text" placeholder="Tìm kiếm..."
                    class="w-full pl-4 pr-10 py-2.5 rounded-full border border-slate-200 bg-slate-50 focus:bg-white focus:ring-2 focus:ring-secondary/20 focus:border-secondary outline-none transition-all text-sm">
                <button
                    class="absolute right-2 top-1.5 p-1.5 bg-secondary text-white rounded-full hover:bg-secondary-hover transition-colors shadow-sm">
                    <i data-lucide="search" class="w-4 h-4"></i>
                </button>
            </div>
            <div class="flex items-center gap-1 sm:gap-4">
                <a href="cart.html"
                    class="relative p-2 text-secondary bg-secondary/10 rounded-full transition-colors group">
                    <i data-lucide="shopping-bag" class="w-5 h-5 group-hover:text-secondary transition-colors"></i>
                    <span
                        class="absolute top-0 right-0 inline-flex items-center justify-center w-5 h-5 text-[10px] font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-red-500 rounded-full border-2 border-white">2</span>
                </a>
            </div>
        </div>
    </header>

    <main class="flex-grow py-8 bg-slate-50" x-data="{
        items: [
            { id: 1, title: 'Tâm Lý Học Về Tiền', author: 'Morgan Housel', price: 159000, oldPrice: 199000, image: 'https://images.unsplash.com/photo-1592496431122-2349e0fbc666?auto=format&fit=crop&q=80&w=200', qty: 1 },
            { id: 2, title: 'Nhà Giả Kim', author: 'Paulo Coelho', price: 79000, oldPrice: 0, image: 'https://images.unsplash.com/photo-1543002588-bfa74002ed7e?auto=format&fit=crop&q=80&w=200', qty: 2 }
        ],
        formatter: new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }),
        get subtotal() { return this.items.reduce((sum, item) => sum + item.price * item.qty, 0) },
        get discount() { return 15000 },
        get total() { return this.subtotal - this.discount }
    }">
        <div class="container-custom">
            <h1 class="font-serif font-bold text-3xl text-primary mb-8">Giỏ Hàng Của Bạn <span
                    class="text-base font-sans font-normal text-slate-500"
                    x-text="'(' + items.length + ' sản phẩm)'"></span></h1>

            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Cart Items List -->
                <div class="lg:w-2/3 space-y-4">
                    <!-- Header Row (Desktop) -->
                    <div
                        class="hidden md:grid grid-cols-12 gap-4 text-sm font-bold text-slate-500 pb-2 border-b border-slate-200">
                        <div class="col-span-6">Sản Phẩm</div>
                        <div class="col-span-2 text-center">Đơn Giá</div>
                        <div class="col-span-2 text-center">Số Lượng</div>
                        <div class="col-span-2 text-right">Thành Tiền</div>
                    </div>

                    <!-- Items Loop -->
                    <template x-for="(item, index) in items" :key="item.id">
                        <div
                            class="bg-white rounded-xl shadow-sm p-4 md:grid md:grid-cols-12 md:gap-4 md:items-center relative group">
                            <!-- Product Info -->
                            <div class="col-span-6 flex gap-4">
                                <div
                                    class="w-20 h-28 flex-shrink-0 bg-slate-100 rounded-md overflow-hidden border border-slate-100">
                                    <img :src="item.image" class="w-full h-full object-cover">
                                </div>
                                <div>
                                    <h3
                                        class="font-bold text-primary text-lg md:text-base leading-tight hover:text-secondary transition-colors cursor-pointer">
                                        <a href="product_detail.html" x-text="item.title"></a>
                                    </h3>
                                    <p class="text-sm text-slate-500 mt-1" x-text="item.author"></p>
                                    <button
                                        class="text-xs text-red-500 hover:text-red-700 mt-2 flex items-center gap-1 md:hidden"
                                        @click="items = items.filter(i => i.id !== item.id)">
                                        <i data-lucide="trash-2" class="w-3 h-3"></i> Xóa
                                    </button>
                                </div>
                            </div>

                            <!-- Price -->
                            <div class="col-span-2 text-center hidden md:block">
                                <span class="font-bold block" x-text="formatter.format(item.price)"></span>
                                <span class="text-xs text-slate-400 line-through block" x-show="item.oldPrice > 0"
                                    x-text="formatter.format(item.oldPrice)"></span>
                            </div>

                            <!-- Qty -->
                            <div class="col-span-2 flex justify-center mt-3 md:mt-0">
                                <div class="flex items-center border border-slate-200 rounded-lg">
                                    <button class="p-1 px-2 text-slate-500 hover:text-primary"
                                        @click="item.qty > 1 ? item.qty-- : null"><i data-lucide="minus"
                                            class="w-3 h-3"></i></button>
                                    <input type="text" x-model="item.qty"
                                        class="w-8 text-center text-sm font-bold focus:outline-none" readonly>
                                    <button class="p-1 px-2 text-slate-500 hover:text-primary" @click="item.qty++"><i
                                            data-lucide="plus" class="w-3 h-3"></i></button>
                                </div>
                            </div>

                            <!-- Total -->
                            <div class="col-span-2 text-right hidden md:block">
                                <span class="font-bold text-secondary text-lg"
                                    x-text="formatter.format(item.price * item.qty)"></span>
                            </div>

                            <!-- Delete Action Desktop -->
                            <button class="absolute top-4 right-4 text-slate-300 hover:text-red-500 hidden md:block p-1"
                                @click="items = items.filter(i => i.id !== item.id)">
                                <i data-lucide="x" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </template>
                </div>

                <!-- Order Summary -->
                <div class="lg:w-1/3">
                    <div class="bg-white rounded-xl shadow-card p-6 sticky top-24">
                        <h2 class="font-bold text-lg text-primary mb-6 border-b border-slate-100 pb-4">Cộng Giỏ Hàng
                        </h2>

                        <div class="space-y-4 text-sm text-slate-600 mb-6">
                            <div class="flex justify-between">
                                <span>Tạm tính</span>
                                <span class="font-bold text-primary" x-text="formatter.format(subtotal)"></span>
                            </div>
                            <div class="flex justify-between">
                                <span>Giảm giá</span>
                                <span class="font-bold text-green-500" x-text="'-' + formatter.format(discount)"></span>
                            </div>
                            <div class="flex justify-between">
                                <span>Phí vận chuyển</span>
                                <span class="text-green-500 font-bold">Miễn phí</span>
                            </div>
                        </div>

                        <!-- Coupon Input -->
                        <div class="flex gap-2 mb-6">
                            <input type="text" placeholder="Mã giảm giá"
                                class="flex-1 bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-secondary">
                            <button class="btn btn-outline py-2 px-4 text-sm">Áp Dụng</button>
                        </div>

                        <div class="border-t border-slate-100 pt-4 flex justify-between items-end mb-6">
                            <span class="font-bold text-primary">Tổng cộng</span>
                            <div class="text-right">
                                <span class="block text-2xl font-bold text-secondary"
                                    x-text="formatter.format(total)"></span>
                                <span class="text-xs text-slate-400">(Đã bao gồm VAT)</span>
                            </div>
                        </div>

                        <a href="checkout.html"
                            class="btn btn-secondary w-full text-lg shadow-lg shadow-secondary/20 hover:scale-[1.02] transition-transform">
                            Tiến Hành Thanh Toán
                        </a>

                        <a href="products.html"
                            class="block text-center text-sm text-slate-500 hover:text-secondary mt-4 flex items-center justify-center gap-1">
                            <i data-lucide="arrow-left" class="w-4 h-4"></i> Tiếp tục mua sắm
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Reuse (Placeholder) -->
    <footer class="bg-primary py-8 text-center text-slate-500 text-sm mt-auto">
        &copy; 2026 BookStore. All rights reserved.
    </footer>

    <script>
        lucide.createIcons();
    </script>
</body>

</html>