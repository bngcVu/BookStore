<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ hàng - BookStore</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;700;800&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/styles.css">
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <style type="text/tailwindcss">
        @theme {
            --font-display: 'Outfit', sans-serif;
            --font-body: 'Inter', sans-serif;
            --color-violet-500: #8b5cf6;
            --color-violet-600: #7c3aed;
        }
    </style>
</head>

<body class="min-h-screen pb-20">

    <div id="header-placeholder"></div>

    <main class="pt-[100px] max-w-7xl mx-auto px-4 sm:px-6">
        <h1 class="text-3xl font-display font-bold text-slate-900 mb-8">Giỏ hàng của bạn</h1>

        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Items -->
            <div class="flex-1 space-y-4" id="cart-container">
                <!-- JS Inject -->
            </div>

            <!-- Summary -->
            <div class="w-full lg:w-[350px]">
                <div class="glass-card bg-white p-6 rounded-2xl sticky top-24">
                    <h3 class="font-bold text-slate-800 text-lg mb-6">Tổng đơn hàng</h3>

                    <div class="space-y-4 border-b border-slate-200 pb-6 mb-6">
                        <div class="flex justify-between text-slate-600">
                            <span>Tạm tính</span>
                            <span class="font-medium" id="subtotal">0đ</span>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Giảm giá</span>
                            <span class="font-medium text-green-600">-0đ</span>
                        </div>
                    </div>

                    <div class="flex justify-between items-end mb-6">
                        <span class="font-bold text-slate-800">Tổng cộng</span>
                        <div class="text-right">
                            <span class="block text-2xl font-bold text-violet-600" id="total">0đ</span>
                            <span class="text-xs text-slate-400">(Chưa bao gồm phí ship)</span>
                        </div>
                    </div>

                    <a href="checkout.html"
                        class="block w-full bg-slate-900 text-white font-bold py-3.5 rounded-xl text-center shadow-lg hover:bg-slate-800 transition-all">
                        Thanh toán
                    </a>
                </div>
            </div>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script src="js/mock_data.js"></script>
    <script src="js/layout.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('cart-container');
            const items = window.MOCK_DATA.cart_items;
            let subtotal = 0;

            if (items.length === 0) {
                container.innerHTML = `<div class="text-center py-12 text-slate-500 glass-card rounded-2xl">Giỏ hàng trống</div>`;
            } else {
                container.innerHTML = items.map(item => {
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;
                    return `
                    <div class="glass bg-white p-4 rounded-2xl flex gap-4 md:gap-6 items-center">
                        <div class="w-20 h-24 bg-slate-50 rounded-xl overflow-hidden border border-slate-100 flex-shrink-0">
                            <img src="${item.image}" class="w-full h-full object-contain">
                        </div>
                        
                        <div class="flex-1">
                            <div class="flex justify-between items-start mb-1">
                                <h3 class="font-bold text-slate-800 text-base hover:text-violet-600 transition-colors cursor-pointer">
                                    <a href="product_detail.html?id=${item.book_id}">${item.book_title}</a>
                                </h3>
                                <button class="text-slate-400 hover:text-rose-500 transition-colors p-1"><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button>
                            </div>
                            <p class="text-xs text-slate-500 mb-2">Phân loại: ${item.variant}</p>
                            
                            <div class="flex items-center justify-between mt-2">
                                <span class="text-violet-600 font-bold">${window.formatPrice(item.price)}</span>
                                <div class="flex items-center border border-slate-200 rounded-lg bg-slate-50 h-8">
                                    <button class="w-8 h-full flex items-center justify-center text-slate-500 hover:text-violet-600 hover:bg-white rounded-l-lg transition-colors">-</button>
                                    <span class="w-8 text-center text-xs font-bold text-slate-800">${item.quantity}</span>
                                    <button class="w-8 h-full flex items-center justify-center text-slate-500 hover:text-violet-600 hover:bg-white rounded-r-lg transition-colors">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    `
                }).join('');
            }

            document.getElementById('subtotal').textContent = window.formatPrice(subtotal);
            document.getElementById('total').textContent = window.formatPrice(subtotal);
        });
    </script>
</body>

</html>